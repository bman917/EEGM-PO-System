<%=javascript_tag do %>

$(document).ready(function(){
    setup();
});


<% end %>

<%= form_for(@purchase_order) do |f| %>
  <% if @purchase_order.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@purchase_order.errors.count, "error") %> prohibited this purchase_order from being saved:</h2>

      <ul>
      <% @purchase_order.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

<div class="top_section">
  <div class="field">
    <%= f.label :po_date, "Order Date"%></br>
    <%= f.date_select :po_date %>
  </div>
  <div class="notes">
    <div id="notes_title">
    <%= f.label :notes %>
    <span class="expand">[+]</span>
    <span class="collapse">[ - ]</span>
    </div>
    <%= f.text_area :notes %>
  </div>
</div>
<div class="middle_section">

  <div class="field">
    <%= f.label :supplier_name %><br>
    <%= f.text_field :supplier_name, data: {autocomplete_source: supplier_names_path} %>
  </div>

  <div class="section contact_details_section">
    <h1>Contact Numbers: </h1>
    <%= f.fields_for :phones do |builder| %>
      <%= render 'phones/phone_fields', f: builder%>
    <% end %>
    <%= link_to_add_fields "Add", f, :phones %>
  </div>


  <div class="section contact_person_section">

    <h1>Contact Persons: </h1>
    <%= f.fields_for :purchase_order_contacts do |builder| %>
      <%= render 'purchase_order_contact_fields', f: builder%>
    <% end %>
    <%= link_to_add_fields "Add", f, :purchase_order_contacts %>  
  </div>

</div>
<div class="bottom_section">
 <div class="section items_section">
      <h1>Items</h1>
      <%= f.fields_for :purchase_items do |builder| %>
        <%= render 'purchase_item_fields', f: builder%>
      <% end %>
      <%= link_to_add_fields "Add Item", f, :purchase_items %>
 </div>
  
  <div class="actions">
    <%= f.submit %>
  </div>
</div>
<% end %>
